#! /usr/bin/env ruby

lib = File.expand_path(File.dirname(__FILE__) + '/../lib')
$: << lib unless $:.include?(lib)

require 'optparse'
require 'cldr'

root = File.expand_path(File.dirname(__FILE__) + '/..')
options = { 
  :source => "#{root}/vendor/cldr/data/core/supplemental/plurals.xml",
  :target => "#{root}/tmp/plurals.rb",
}

OptionParser.new do |opt|
  opt.banner = "Usage: console [environment] [options]"
  opt.on('-s', '--source', 'CLDR plurals.xml file to use') { |source| options[:source] = source }
  opt.on('-t', '--target', 'target path to export to')     { |target| options[:target] = target }
  opt.parse!(ARGV)
end

Cldr::Plural::Rules.extract_cldr(*options.values_at(:source, :target))
                            

